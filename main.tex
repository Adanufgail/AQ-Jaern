\documentclass[openany,svgnames]{book}
\usepackage[svgnames]{xcolor}
\usepackage{blindtext}

\usepackage{comment}

\usepackage{parskip}
\setlength{\parindent}{0pt}

\usepackage{geometry}
\geometry{letterpaper, portrait, margin=0.5in}

\usepackage{imakeidx}
\makeindex[columns=3]

\usepackage{multicol}
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{nameref}
\usepackage{tikz}
\usepackage[sfdefault]{roboto}
\usepackage[most]{tcolorbox}
\tcbuselibrary{breakable}
\usepackage{booktabs}
\usepackage{xtab}
\usepackage{makecell}
\usepackage{wrapfig}

\usepackage{array,ragged2e}
\newcolumntype{L}{>{\RaggedRight\arraybackslash}X}

\usepackage{titlesec}

\usepackage{etoolbox}

\usepackage{xparse}

\def\defcolwidth{0.6cm}
\def\aq{\textbf{Adventure Quest }}

\setcounter{secnumdepth}{5}

%\DeclareRobustCommand{\indy}[2]{\index{\MakeLowercase{#1}}\textbf{#2}}
\DeclareDocumentCommand \indy { o m } {%
  \IfNoValueTF {#1} {%
    \lowercase{\def\temp{#2}}%
    %\expandafter\index\expandafter{\temp}
    \index{\temp}%
    \textbf{#2}\xspace%
    %\index{\MakeLowercase{#1}}\textbf{#1}%
  }{%
    \lowercase{\def\temp{#1}}%
    %\expandafter\index\expandafter{\temp}
    \index{\temp}%
    \textbf{#2}\xspace%
    %\index{\MakeLowercase{#1}}\textbf{#2}%
  }%
}
\DeclareDocumentCommand \indx { m } {%
    \lowercase{\def\temp{#1}}%
    \index{\temp}%
}


\DeclareRobustCommand{\STR}{\indy[strength!STR]{STR}}
\DeclareRobustCommand{\INT}{\indy[intelligence!INT]{INT}}
\DeclareRobustCommand{\PER}{\indy[perception!PER]{PER}}
\DeclareRobustCommand{\CSE}{\indy[common sense!CSE]{CSE}}
\DeclareRobustCommand{\HEA}{\indy[health!HEA]{HEA}}
\DeclareRobustCommand{\AGI}{\indy[agility!AGI]{AGI}}
\DeclareRobustCommand{\PWR}{\indy[power!PWR]{PWR}}
\DeclareRobustCommand{\COM}{\indy[comliness!COM]{COM}}
\DeclareRobustCommand{\WIL}{\indy[willpower!WIL]{WIL}}
\DeclareRobustCommand{\CDV}{\indy[combat defense!CDV]{CDV}}
\DeclareRobustCommand{\CM}{\indy[combat modifier!CM]{CM}}
\DeclareRobustCommand{\GDV}{\indy[grapple defense!GDV]{GDV}}
\DeclareRobustCommand{\GM}{\indy[grapple modifier!GM]{GM}}
\DeclareRobustCommand{\MDV}{\indy[missile defense!MDV]{MDV}}
\DeclareRobustCommand{\MM}{\indy[missile modifier!MM]{MM}}
\DeclareRobustCommand{\DP}{\indy[damage points!DP]{DP}}
\DeclareRobustCommand{\EP}{\indy[experience points!EP]{EP}}
\DeclareRobustCommand{\DU}{\indy[divine units!DU]{DU}}
\DeclareRobustCommand{\EU}{\indy[elemential units!EU]{EU}}
\DeclareRobustCommand{\LF}{\indy[life force!LF]{LF}}
\DeclareRobustCommand{\LOS}{\indy[line of sight!LOS]{LOS}}

\newcommand{\newacronymidx}[4][]{
    \newacronym{#2}{#3}{#4}
    \ifstrempty{#1}
        { \index{#3|see{\MakeLowercase{#4}}} }
        { \index{#3|see{#1}} }
}

\DeclareTotalTCBox{\tcdieroll}{ O{GreenYellow} v !O{} }{%
  leftrule=0mm,%
  rightrule=0mm,%
  toprule=0mm,%
  bottomrule=0mm,%
  rounded corners,%
  top=1pt,%
  bottom=0pt,%
  left=2pt,%
  right=2pt,%
  tcbox raise base,%
  boxsep=0mm,%
  nobeforeafter,%
  colback=white!40!#1,%
  colupper=black,%
  halign=center,%
  }{\textbf{\strut{#2}}}

\DeclareTotalTCBox{\tcdefine}{ O{DodgerBlue} v !O{} }{%
  leftrule=0mm,%
  rightrule=0mm,%
  toprule=0mm,%
  bottomrule=0mm,%
  rounded corners,%
  top=1pt,%
  bottom=0pt,%
  left=2pt,%
  right=2pt,%
  tcbox raise base,%
  boxsep=0mm,%
  nobeforeafter,%
  colback=white!30!#1,%
  colupper=black,%
  halign=center,%
  }{\textbf{\strut{#2}}}

\DeclareTotalTCBox{\tcpage}{ O{Crimson} m !O{} }{%
  leftrule=0mm,%
  rightrule=0mm,%
  toprule=0mm,%
  bottomrule=0mm,%
  rounded corners,%
  top=1pt,%
  bottom=0pt,%
  left=2pt,%
  right=2pt,%
  tcbox raise base,%
  boxsep=0mm,%
  nobeforeafter,%
  colback=white!50!#1,%
  colupper=black,%
  halign=center,%
  }{\textbf{\strut{Page #2}}}

\newtcolorbox{normbox}[1][]{%
  boxrule=0pt,%
  enhanced,
  title=\textbf{#1},%
  left=2pt,%
  right=2pt,%
  top=2pt,%
  bottom=1pt,%
  boxsep=2pt,%
  boxrule=0.6pt,%
  lefttitle=2mm,%
  righttitle=2mm,
  toptitle=1mm,%
  bottomtitle=1mm,%
  minipage boxed title,%
  hbox,%
  colbacktitle=Navy,%
  colback=white,%
  }

\newtcolorbox{normboxper}[2][]{%
  boxrule=0pt,%
  enhanced,
  title=\textbf{#2},%
  left=2pt,%
  right=2pt,%
  top=2pt,%
  bottom=1pt,%
  boxsep=2pt,%
  boxrule=0.6pt,%
  lefttitle=2mm,%
  righttitle=2mm,
  toptitle=1mm,%
  bottomtitle=1mm,%
  width=#1\linewidth,%
  %width=0.5\linewidth,%
  minipage boxed title,%
  %attach boxed title to top,%
  }


\begin{document}
\enlargethispage{1.5\baselineskip}
\raggedright
%\setlength{\multicolsep}{6.0pt plus 2.0pt minus 1.5pt}%
\titlespacing\section{0pt}{6pt}{6pt}
\titlespacing\subsection{0pt}{6pt }{6pt}
\titlespacing\subsubsection{0pt}{6pt}{6pt}
%\include{test.tex}
\include{titlepage.tex}
\include{copyright.tex}
\include{dedication.tex}
\include{introduction.tex}
\include{creating-an-adventurer.tex}
\include{playing-an-adventurer.tex}
\include{life-on-the-high-seas.tex}
\include{skills.tex}
\include{onivero.tex}
\include{jaernian-humanoids.tex}
\include{creating-and-playing-actors.tex}
\include{important-tables.tex}
\include{earth-references.tex}
\include{index.tex}
\end{document}